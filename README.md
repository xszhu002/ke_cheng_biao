# 课程表管理系统

一个基于Web的现代化课程表管理系统，支持多教师管理、拖拽换课、原始课程表保存与复位、特需托管、随手记笔记等丰富功能。

## ✨ 功能特色

### 🎯 核心功能

- **多教师管理** - 支持多个教师独立管理各自的课程表
- **拖拽换课** - 直观的拖拽界面，轻松实现临时换课调整
- **原始课程表** - 学期初保存基准课程表，支持一键复位功能
- **特需托管** - 灵活安排非周期性的特殊课程
- **智能日历** - 基于学期时间的自动周次计算
- **实时保存** - 所有操作自动保存，无需手动确认

### 📝 增强功能

- **随手记笔记** - 支持每周笔记记录，完整的Markdown格式支持
- **管理员后台** - 完善的教师管理和系统配置界面
- **消息提示系统** - 友好的Toast提示，实时反馈操作结果
- **响应式设计** - 适配不同设备屏幕，随时随地管理课程表

## 🛠 技术栈

### 后端技术

- **Node.js** + **Express.js** - 轻量级服务器框架
- **SQLite3** - 文件型数据库，无需额外数据库服务器
- **bcryptjs** - 安全的密码加密
- **Express-Session** - 会话管理

### 前端技术

- **原生HTML5/CSS3/JavaScript** - 零外部框架依赖
- **CSS Grid + Flexbox** - 现代化布局方案
- **HTML5 Drag & Drop API** - 原生拖拽交互
- **Fetch API** - 现代化HTTP请求
- **CSS变量** - 统一的主题管理

## 📦 快速开始

### 环境要求

- **Node.js** v14.0+ (推荐 v18+)
- **npm** v6.0+
- 现代浏览器（支持ES6+和HTML5 Drag & Drop API）

### 安装步骤

1. **克隆项目**

```bash
git clone <repository-url>
cd kechenbiao
```

2. **安装依赖**

```bash
npm install
```

3. **初始化数据库**

```bash
npm run init-db
```

4. **启动项目**

```bash
# 开发环境（支持热重载）
npm run dev

# 生产环境
npm start
```

5. **访问应用**

- 主应用：http://localhost:3000
- 管理后台：http://localhost:3000/admin.html

## 📖 使用指南

### 首次使用

1. **访问管理后台** - 在浏览器中打开 `http://localhost:3000/admin.html`
2. **登录系统** - 使用默认管理员账号登录（首次使用需要设置密码）
3. **添加教师** - 在教师管理中添加需要管理课程表的教师
4. **创建学期** - 设置当前学期的时间范围
5. **开始使用** - 回到主页面开始课程表管理

### 日常操作

#### 课程表管理

- **添加课程** - 点击空白时间格添加新课程
- **拖拽换课** - 直接拖拽课程块到新位置
- **编辑课程** - 右键点击课程块进行编辑
- **删除课程** - 右键菜单中选择删除

#### 原始课程表

- **保存原始** - 学期初设置好课程表后，点击"保存为原始课程表"
- **复位操作** - 需要恢复到原始状态时，点击"复位到原始课程表"

#### 特需托管

- **查看日历** - 点击"日历"按钮查看月历
- **添加特需** - 在日历中点击日期，添加特需托管课程
- **查看安排** - 已安排特需托管的日期会有特殊标记

#### 随手记笔记

- **切换模式** - 在预览和编辑模式间切换
- **Markdown支持** - 支持完整的Markdown语法
- **自动保存** - 笔记内容会自动保存

## 🎨 界面预览

### 主界面

- 清晰的课程表网格布局
- 直观的拖拽操作体验
- 实时的周次导航

### 管理后台

- 现代化的登录界面
- 完整的教师管理功能
- 系统配置和数据维护

### 移动端适配

- 响应式设计，适配各种屏幕尺寸
- 触屏友好的交互体验

## 📂 项目结构

```
kechenbiao/
├── server.js              # 主服务器文件
├── package.json           # 项目配置
├── database/              # 数据库文件
├── scripts/               # 数据库脚本
├── public/                # 前端文件
│   ├── index.html        # 主页面
│   ├── admin.html        # 管理后台
│   ├── css/              # 样式文件
│   └── js/               # JavaScript文件
└── README.md             # 本文档
```

## 🚀 部署说明

### 本地部署

项目开箱即用，按照快速开始步骤即可在本地运行。

### 服务器部署

1. 将项目文件上传到服务器
2. 安装Node.js环境
3. 运行安装和初始化命令
4. 使用PM2或其他进程管理器启动服务
5. 配置反向代理（如nginx）

### Docker部署

```bash
# 构建镜像
docker build -t schedule-app .

# 运行容器
docker run -d -p 3000:3000 schedule-app
```

## 🔧 开发说明

### 目录说明

- `public/js/` - 前端JavaScript模块
- `public/css/` - 样式文件
- `scripts/` - 数据库管理脚本
- `database/` - SQLite数据库文件

### API接口

系统提供RESTful API接口，支持：

- 教师管理：增删改查教师信息
- 课程表管理：获取、更新课程安排
- 特需托管：管理非周期性课程
- 笔记管理：周记的增删改查

### 数据库脚本

- `npm run init-db` - 初始化数据库
- `npm run migrate-db` - 数据库迁移
- `npm run cleanup-db` - 清理数据库

## 🤝 贡献指南

欢迎提交Issue和Pull Request来帮助改进项目。

### 开发流程

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 发起Pull Request

### 代码规范

- 使用ES6+语法
- 保持代码简洁清晰
- 添加必要的注释
- 遵循现有的代码风格

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为这个项目提供建议和反馈的用户。

---

如有问题或建议，欢迎通过Issue与我们联系。
